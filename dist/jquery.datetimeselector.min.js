(function(h){jQuery.fn.dateTimeSelector=function(b){b=h.extend({format:"Y-m-d H:i:s",sectionTag:"",sectionClass:"",sectionDateTag:"",sectionDateClass:"",sectionTimeTag:"",sectionTimeClass:"",yearDefault:"Select year",yearValue:(new Date).getFullYear(),yearMin:(new Date).getFullYear()-5,yearMax:(new Date).getFullYear()+5,yearClass:"",monthDefault:"Select month",monthValue:"",monthNames:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",
12:"December"},monthClass:"",dayDefault:"Select day",dayValue:"",dayClass:"",hourDefault:"Select hour",hourValue:"",hourClass:"",minuteDefault:"Select minute",minuteValue:"",minuteClass:"",secondDefault:"Select second",secondValue:"",secondClass:""},b);var m=[],k=[],n="",r={y:function(a){var c=b.yearMin,d=b.yearMax;a=a?a:b.yearValue;for(var e=b.yearDefault?'<option value="----">'+b.yearDefault+"</option>":"",f=c;f<=d;f++)c="",f==a&&(c="selected"),e+='<option value="'+f+'" '+c+">"+f+"</option>";return e},
m:function(a){a=a?a:b.monthValue;for(var c=b.monthNames,d=b.monthDefault?'<option value="--">'+b.monthDefault+"</option>":"",e,f=1;12>=f;f++)e="",print_i=f,f==a&&(e="selected"),10>print_i&&(print_i="0"+print_i),d+='<option value="'+print_i+'" '+e+">"+c[f]+"</option>";return d},d:function(a){a=a?a:b.dayValue;for(var c=b.dayDefault?'<option value="--">'+b.dayDefault+"</option>":"",d,e=1;31>=e;e++)d="",print_i=e,e==a&&(d="selected"),10>print_i&&(print_i="0"+print_i),c+='<option value="'+print_i+'" '+
d+">"+print_i+"</option>";return c},h:function(a){a=a?a:b.hourValue;for(var c=b.hourDefault?'<option value="--">'+b.hourDefault+"</option>":"",d,e=0;23>=e;e++)d="",print_i=e,e==a&&""!=a&&(d="selected"),10>print_i&&(print_i="0"+print_i),c+='<option value="'+print_i+'" '+d+">"+print_i+"</option>";return c},i:function(a){a=a?a:b.minuteValue;for(var c=b.minuteDefault?'<option value="--">'+b.minuteDefault+"</option>":"",d,e=0;59>=e;e++)d="",print_i=e,e==a&&""!=a&&(d="selected"),10>print_i&&(print_i="0"+
print_i),c+='<option value="'+print_i+'" '+d+">"+print_i+"</option>";return c},s:function(a){a=a?a:b.secondValue;for(var c=b.secondDefault?'<option value="--">'+b.secondDefault+"</option>":"",d,e=0;59>=e;e++)d="",print_i=e,e==a&&""!=a&&(d="selected"),10>print_i&&(print_i="0"+print_i),c+='<option value="'+print_i+'" '+d+">"+print_i+"</option>";return c}},p=function(){var a=b.format,a=a.toLowerCase();m=a.replace(/\W/g,"").split("");k=a.replace(/\w/g,"").split("");""!=n&&(n=n.replace(/\W/g,"-").split("-"));
return!1};h(document).on("change","select[id^=dts_][id$=_dte]",function(){b.format=h(this).data("format");p();var a=h(this).attr("id"),c=/dts_(id|name)_(.*)_(y|m|d|h|i|s)_dte/ig.exec(a),a=c[1],c=c[2],d;d="dts_"+a+"_"+c;for(var e="",f,g=0;g<m.length;g++)f=m[g],f=h("#"+d+"_"+f+"_dte").val(),void 0==k[g]&&(k[g]=""),e+=f+k[g];d=e;h("["+a+"='"+c+"']").val(d);return!1});return this.each(function(){var a=h(this).attr("name"),c=h(this).attr("id");n=h(this).val();p();for(var a=void 0!=c?"dts_id_"+c:"dts_dts_name_"+
a,d="",e,f,c=0,g="",k=0;k<m.length;k++){f=m[k];e=r[f](n[k]);if("y"==f||"d"==f||"m"==f)"Time"==g&&(d+="</"+b.sectionTimeTag+">",g=""),"Date"!=g&&b.sectionDateTag.length&&(g="Date",c="start");if("h"==f||"i"==f||"s"==f)"Date"==g&&(d+="</"+b.sectionDateTag+">",g=""),"Time"!=g&&b.sectionTimeTag.length&&(g="Time",c="start");"start"==c&&(d+="<"+b["section"+g+"Tag"]+' class="'+b["section"+g+"Class"]+'">',c="");var q=a,l="";switch(f){case "y":l=b.yearClass;break;case "m":l=b.monthClass;break;case "d":l=b.dayClass;
break;case "h":l=b.hourClass;break;case "i":l=b.minuteClass;break;case "s":l=b.secondClass}f='<select id="'+q+"_"+f+'_dte" name="'+q+"["+f+']" class="'+l+'" data-format="'+b.format+'">';f=f+e+"</select>";d+=f}""!=g&&(d+="</"+b["section"+g+"Tag"]+">");a=d;""!=b.sectionTag&&(a="<"+b.sectionTag+' class="'+b.sectionClass+'">'+a+"</"+b.sectionTag+">");h(this).hide();h(this).parent().append(a)})}})(jQuery);